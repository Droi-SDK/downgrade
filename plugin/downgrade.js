!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.WeexDowngrade=r()}(this,function(){"use strict";function e(){return"object"!=typeof window&&"undefined"!=typeof callNative}function r(){try{return weex.requireModule(c)}catch(e){}try{return __weex_require__("@weex-module/"+c)}catch(e){}return{error:function(){console&&console.log&&console.log("Can not found module ["+c+"]")}}}function n(n,t,i){return!!e()&&(n=parseInt(n)||u,t=parseInt(t)||d,i=o(i)?i:p,r().error(n,t,i),!0)}function t(r){var n={isDowngrade:!1};if(!e())return n;var t=WXEnvironment||{},o=r[(t.platform||"unknow").toLowerCase()]||{};for(var c in t){var u=c.toLowerCase(),d=t[c],p=u.indexOf("version")>=0,l=u.indexOf("devicemodel")>=0,v=o[c];if(v&&p){var w=a(v),g=a(t[c]);if(0===u.indexOf("app")&&i(v)&&(w=a(v[t.appName||""])),s.satisfies(g,w)){n=f(c,d,v);break}}else if(l&&(Array.isArray(v)?v:[v]).indexOf(d)>=0){n=f(c,d,v);break}}return n}function o(e){return"string"==typeof e}function i(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)}function a(e){if("*"===e)return e;for(var r=(e=o(e)?e:"").split("."),n=0,t=[];n<3;){var i=o(r[n])&&r[n]?r[n]:"0";t.push(i),n++}return t.join(".")}function f(e,r,n){var t={isDowngrade:!0,errorType:1,code:1e3},o=e.toLowerCase();return o.indexOf("osversion")>=0?t.code=1001:o.indexOf("appversion")>=0?t.code=1002:o.indexOf("weexversion")>=0?t.code=1003:o.indexOf("devicemodel")>=0&&(t.code=1004),t.errorMessage="Downgrade["+e+"]: envInfo "+r+" matched criteria "+n,t}var s={satisfies:function(e,r){var n=/(\W+)?([\d|.]+)/;if(typeof e+typeof r!="stringstring")return!1;if("*"==r)return!0;for(var t=r.match(n),o=e.split("."),i=t[2].split("."),a=Math.max(o.length,i.length),f=0,s=0;s<a;s++){if(o[s]&&!i[s]&&parseInt(o[s])>0||parseInt(o[s])>parseInt(i[s])){f=1;break}if(i[s]&&!o[s]&&parseInt(i[s])>0||parseInt(o[s])<parseInt(i[s])){f=-1;break}}switch(t[1]){case"<":if(-1===f)return!0;break;case"<=":if(1!==f)return!0;break;case">":if(1===f)return!0;break;case">=":if(-1!==f)return!0;break;default:if(0===f)return!0}return!1}},c="instanceWrap",u=1,d=1003,p="Force downgrade to web";return{force:n,check:t,condition:function(e){var r=t(e);return r.isDowngrade&&n(r.errorType,r.code,r.errorMessage),r.isDowngrade},semverLite:s}});
